"use strict";
var core_1 = require("@angular/core");
var dialogs = require("ui/dialogs");
var validator = require('email-validator');
var LoginPage = (function () {
    function LoginPage() {
        this.model = { email: '', password: '', passwordCheck: '' };
        this.isLogin = true;
    }
    LoginPage.prototype.ngAfterViewInit = function () {
        this.setNativeElements();
    };
    LoginPage.prototype.login = function (email, password) {
        var loginSuccess;
        if (validator.validate(email)) {
            //CHECK CREDENTIALS HERE
            dialogs.alert('Email: ' + email + ' Password: ' + password).then(function (result) {
                console.log('Dialog result: ' + result);
            });
            loginSuccess = true;
        }
        else {
            dialogs.alert('Email is not valid').then(function (result) {
                console.log('Dialog result: ' + result);
            });
            loginSuccess = false;
        }
        return loginSuccess;
    };
    LoginPage.prototype.signin = function () {
        if (this.isLogin) {
            this.toggle();
        }
        else {
            this.register(this.model.email, this.model.password, this.model.passwordCheck);
        }
    };
    LoginPage.prototype.toggle = function () {
        var _this = this;
        this.modal.animate({
            opacity: 0,
            duration: 350,
        }).then(function () {
            _this.isLogin = !_this.isLogin;
            _this.modal.animate({
                opacity: 1,
                duration: 350,
            });
        });
    };
    LoginPage.prototype.register = function (email, password, passwordCheck) {
        var _this = this;
        var isEmailValid = validator.validate(email);
        var isPassValid = password.length > 7;
        var isPassDoubleChecked = password === passwordCheck;
        var registerSuccess;
        //CHECK FIELD RULES HERE
        if (isEmailValid && isPassDoubleChecked && isPassValid) {
            dialogs.confirm('Email: ' + email + ' Password: ' + password + ' Password check: ' + passwordCheck).then(function (result) {
                console.log('Dialog result: ' + result);
                if (result) {
                    _this.toggle();
                }
            });
            registerSuccess = true;
        }
        else {
            dialogs.alert(this.alertMessage(isEmailValid, isPassValid, isPassDoubleChecked)).then(function (result) {
                console.log('Dialog result: ' + result);
            });
            registerSuccess = false;
        }
        return registerSuccess;
    };
    LoginPage.prototype.alertMessage = function (isEmailValid, isPassValid, isPassDoubleChecked) {
        var msg = '';
        if (!isEmailValid)
            msg += 'Email is not valid. ';
        if (!isPassValid)
            msg += 'Password is too short. ';
        if (!isPassDoubleChecked)
            msg += 'Passwords don\'t match.';
        return msg;
    };
    LoginPage.prototype.setNativeElements = function () {
        this.modal = this.modalRef.nativeElement;
    };
    return LoginPage;
}());
__decorate([
    core_1.ViewChild('modal'),
    __metadata("design:type", core_1.ElementRef)
], LoginPage.prototype, "modalRef", void 0);
LoginPage = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: 'sc-login-page',
        templateUrl: 'login.html',
        styleUrls: ['login.css']
    })
], LoginPage);
exports.LoginPage = LoginPage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9naW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQ0FBOEU7QUFDOUUsb0NBQXVDO0FBRXZDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBUTNDLElBQWEsU0FBUztJQU50QjtRQVFZLFVBQUssR0FBOEQsRUFBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFLEVBQUUsRUFBQyxDQUFDO1FBQ2hILFlBQU8sR0FBWSxJQUFJLENBQUM7SUFpRnBDLENBQUM7SUE1RUcsbUNBQWUsR0FBZjtRQUNJLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFTSx5QkFBSyxHQUFaLFVBQWEsS0FBYSxFQUFFLFFBQWdCO1FBQ3hDLElBQUksWUFBcUIsQ0FBQztRQUMxQixFQUFFLENBQUEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQix3QkFBd0I7WUFDeEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxHQUFHLGFBQWEsR0FBRyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNO2dCQUNuRSxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxDQUFDO1lBQ0gsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN4QixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixPQUFPLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTTtnQkFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUM1QyxDQUFDLENBQUMsQ0FBQztZQUNILFlBQVks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M0QsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFTyxxQ0FBaUIsR0FBekI7UUFDSSxJQUFJLENBQUMsS0FBSyxHQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDO0lBQzNDLENBQUM7SUFDTCxnQkFBQztBQUFELENBQUMsQUFwRkQsSUFvRkM7QUEvRXVCO0lBQW5CLGdCQUFTLENBQUMsT0FBTyxDQUFDOzhCQUFtQixpQkFBVTsyQ0FBQztBQUx4QyxTQUFTO0lBTnJCLGdCQUFTLENBQUM7UUFDUCxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7UUFDbkIsUUFBUSxFQUFFLGVBQWU7UUFDekIsV0FBVyxFQUFFLFlBQVk7UUFDekIsU0FBUyxFQUFFLENBQUMsV0FBVyxDQUFDO0tBQzNCLENBQUM7R0FDVyxTQUFTLENBb0ZyQjtBQXBGWSw4QkFBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IGRpYWxvZ3MgPSByZXF1aXJlKCd1aS9kaWFsb2dzJyk7XG5cbnZhciB2YWxpZGF0b3IgPSByZXF1aXJlKCdlbWFpbC12YWxpZGF0b3InKTtcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ3NjLWxvZ2luLXBhZ2UnLFxuICAgIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJ2xvZ2luLmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExvZ2luUGFnZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuXG4gICAgcHJpdmF0ZSBtb2RlbCA6IHtlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBwYXNzd29yZENoZWNrOiBzdHJpbmd9ID0ge2VtYWlsOiAnJywgcGFzc3dvcmQ6ICcnLCBwYXNzd29yZENoZWNrOiAnJ307XG4gICAgcHJpdmF0ZSBpc0xvZ2luOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIEBWaWV3Q2hpbGQoJ21vZGFsJykgcHJpdmF0ZSBtb2RhbFJlZjogRWxlbWVudFJlZjtcbiAgICBwcml2YXRlIG1vZGFsO1xuXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnNldE5hdGl2ZUVsZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGxvZ2luKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IGxvZ2luU3VjY2VzczogYm9vbGVhbjtcbiAgICAgICAgaWYodmFsaWRhdG9yLnZhbGlkYXRlKGVtYWlsKSkge1xuICAgICAgICAgICAgLy9DSEVDSyBDUkVERU5USUFMUyBIRVJFXG4gICAgICAgICAgICBkaWFsb2dzLmFsZXJ0KCdFbWFpbDogJyArIGVtYWlsICsgJyBQYXNzd29yZDogJyArIHBhc3N3b3JkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RpYWxvZyByZXN1bHQ6ICcgKyByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2dpblN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlhbG9ncy5hbGVydCgnRW1haWwgaXMgbm90IHZhbGlkJykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEaWFsb2cgcmVzdWx0OiAnICsgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9naW5TdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvZ2luU3VjY2VzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2lnbmluKCkge1xuICAgICAgICBpZih0aGlzLmlzTG9naW4pIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHRoaXMubW9kZWwuZW1haWwsIHRoaXMubW9kZWwucGFzc3dvcmQsIHRoaXMubW9kZWwucGFzc3dvcmRDaGVjayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLm1vZGFsLmFuaW1hdGUoe1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgICAgIH0pLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICB0aGlzLmlzTG9naW4gPSAhdGhpcy5pc0xvZ2luO1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjM1MCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHBhc3N3b3JkQ2hlY2s6IHN0cmluZykge1xuICAgICAgICBsZXQgaXNFbWFpbFZhbGlkOiBib29sZWFuID0gdmFsaWRhdG9yLnZhbGlkYXRlKGVtYWlsKTtcbiAgICAgICAgbGV0IGlzUGFzc1ZhbGlkOiBib29sZWFuID0gcGFzc3dvcmQubGVuZ3RoID4gNztcbiAgICAgICAgbGV0IGlzUGFzc0RvdWJsZUNoZWNrZWQ6IGJvb2xlYW4gPSBwYXNzd29yZCA9PT0gcGFzc3dvcmRDaGVjaztcbiAgICAgICAgbGV0IHJlZ2lzdGVyU3VjY2VzczogYm9vbGVhbjtcbiAgICAgICAgLy9DSEVDSyBGSUVMRCBSVUxFUyBIRVJFXG4gICAgICAgIGlmKGlzRW1haWxWYWxpZCAmJiBpc1Bhc3NEb3VibGVDaGVja2VkICYmIGlzUGFzc1ZhbGlkKSB7XG4gICAgICAgICAgICBkaWFsb2dzLmNvbmZpcm0oJ0VtYWlsOiAnICsgZW1haWwgKyAnIFBhc3N3b3JkOiAnICsgcGFzc3dvcmQgKyAnIFBhc3N3b3JkIGNoZWNrOiAnICsgcGFzc3dvcmRDaGVjaykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEaWFsb2cgcmVzdWx0OiAnICsgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlZ2lzdGVyU3VjY2VzcyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaWFsb2dzLmFsZXJ0KHRoaXMuYWxlcnRNZXNzYWdlKGlzRW1haWxWYWxpZCwgaXNQYXNzVmFsaWQsIGlzUGFzc0RvdWJsZUNoZWNrZWQpKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RpYWxvZyByZXN1bHQ6ICcgKyByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWdpc3RlclN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVnaXN0ZXJTdWNjZXNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWxlcnRNZXNzYWdlKGlzRW1haWxWYWxpZDogYm9vbGVhbiwgaXNQYXNzVmFsaWQ6IGJvb2xlYW4sIGlzUGFzc0RvdWJsZUNoZWNrZWQ6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBsZXQgbXNnID0gJyc7XG4gICAgICAgIGlmICghaXNFbWFpbFZhbGlkKSBtc2cgKz0gJ0VtYWlsIGlzIG5vdCB2YWxpZC4gJyA7XG4gICAgICAgIGlmICghaXNQYXNzVmFsaWQpIG1zZyArPSAnUGFzc3dvcmQgaXMgdG9vIHNob3J0LiAnO1xuICAgICAgICBpZiAoIWlzUGFzc0RvdWJsZUNoZWNrZWQpIG1zZyArPSAnUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2guJztcbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldE5hdGl2ZUVsZW1lbnRzKCkge1xuICAgICAgICB0aGlzLm1vZGFsPXRoaXMubW9kYWxSZWYubmF0aXZlRWxlbWVudDtcbiAgICB9XG59XG4iXX0=